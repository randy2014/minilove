<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MiniLove - æƒ…æ„Ÿæ”¯æŒç¤¾åŒº (CDNç‰ˆæœ¬)</title>
  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- å›¾æ ‡åº“ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- æ ·å¼ -->
  <style>
    /* å…¨å±€æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      color: #333;
    }
    
    #app {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* æŒ‰é’®æ ·å¼ */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    
    .btn-outline {
      background: transparent;
      border: 2px solid #667eea;
      color: #667eea;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    /* å¡ç‰‡æ ·å¼ */
    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    
    /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
    .status-dot {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    
    .status-online {
      background: #10b981;
      box-shadow: 0 0 10px #10b981;
    }
    
    .status-offline {
      background: #ef4444;
    }
    
    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      #app {
        padding: 15px;
      }
      
      .btn {
        width: 100%;
        margin-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <div id="app"></div>
  
  <script type="module">
    const { createApp, ref, onMounted } = Vue
    
    createApp({
      setup() {
        // å“åº”å¼æ•°æ®
        const apiStatus = ref(false)
        const loading = ref(false)
        const testResult = ref('')
        const showLogin = ref(false)
        const loginForm = ref({
          username: '',
          password: ''
        })
        
        // æ£€æŸ¥APIçŠ¶æ€
        const checkApiStatus = async () => {
          try {
            const response = await fetch('http://localhost:3000/health')
            apiStatus.value = response.ok
          } catch (error) {
            apiStatus.value = false
          }
        }
        
        // æµ‹è¯•ç™»å½•API
        const testLogin = async () => {
          loading.value = true
          try {
            const response = await fetch('http://localhost:3000/api/v1/auth/login', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                username: 'test_user',
                password: 'test123'
              })
            })
            
            const data = await response.json()
            testResult.value = JSON.stringify(data, null, 2)
            
            if (data.token) {
              alert('âœ… ç™»å½•æˆåŠŸï¼Tokenå·²è·å–')
            }
          } catch (error) {
            testResult.value = `é”™è¯¯: ${error.message}`
            alert('âŒ APIè¿æ¥å¤±è´¥')
          } finally {
            loading.value = false
          }
        }
        
        // å¤„ç†ç™»å½•
        const handleLogin = async () => {
          try {
            const response = await fetch('http://localhost:3000/api/v1/auth/login', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(loginForm.value)
            })
            
            const data = await response.json()
            if (data.token) {
              alert('ç™»å½•æˆåŠŸï¼')
              showLogin.value = false
              loginForm.value = { username: '', password: '' }
            } else {
              alert('ç™»å½•å¤±è´¥ï¼š' + (data.error || 'æœªçŸ¥é”™è¯¯'))
            }
          } catch (error) {
            alert('ç™»å½•å‡ºé”™ï¼š' + error.message)
          }
        }
        
        // æ‰“å¼€APIæ–‡æ¡£
        const openApiDocs = () => {
          window.open('http://localhost:3000/api-docs', '_blank')
        }
        
        // ç”Ÿå‘½å‘¨æœŸé’©å­
        onMounted(() => {
          checkApiStatus()
        })
        
        return {
          apiStatus,
          loading,
          testResult,
          showLogin,
          loginForm,
          checkApiStatus,
          testLogin,
          handleLogin,
          openApiDocs
        }
      },
      
      template: `
        <div>
          <!-- å¯¼èˆªæ  -->
          <nav style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 0 0 15px 15px; margin-bottom: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div style="display: flex; align-items: center; gap: 10px; font-size: 24px; font-weight: bold;">
                <span>â¤ï¸</span>
                <span>MiniLove</span>
                <span style="font-size: 14px; background: rgba(255,255,255,0.2); padding: 2px 10px; border-radius: 12px;">
                  æƒ…æ„Ÿæ”¯æŒç¤¾åŒº
                </span>
              </div>
              <div style="display: flex; gap: 10px;">
                <button @click="showLogin = !showLogin" class="btn btn-primary">
                  ç™»å½•
                </button>
                <button @click="openApiDocs" class="btn btn-secondary">
                  APIæ–‡æ¡£
                </button>
              </div>
            </div>
          </nav>
          
          <!-- ä¸»å†…å®¹ -->
          <main>
            <!-- è‹±é›„åŒºåŸŸ -->
            <div class="card" style="text-align: center; margin-bottom: 40px;">
              <h1 style="font-size: 36px; margin-bottom: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                æ‰¾åˆ°å±äºä½ çš„æƒ…æ„Ÿæ”¯æŒ
              </h1>
              <p style="font-size: 18px; color: #666; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                ä¸“ä¸º18-45å²ç”·æ€§è®¾è®¡ï¼Œåœ¨æ™šé—´æ—¶æ®µ(18:00~04:00)æä¾›æƒ…æ„Ÿæ”¯æŒã€ç›®æ ‡å¼•å¯¼å’Œç¤¾äº¤è¿æ¥ã€‚
              </p>
              <div style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
                <button @click="testLogin" class="btn btn-primary" style="padding: 15px 30px; font-size: 18px;">
                  <span v-if="loading">æµ‹è¯•ä¸­...</span>
                  <span v-else>æµ‹è¯•APIè¿æ¥</span>
                </button>
                <button @click="openApiDocs" class="btn btn-outline" style="padding: 15px 30px; font-size: 18px;">
                  æŸ¥çœ‹APIæ–‡æ¡£
                </button>
              </div>
            </div>
            
            <!-- ç³»ç»ŸçŠ¶æ€ -->
            <div class="card" style="margin-bottom: 30px;">
              <h2 style="margin-bottom: 20px;">ç³»ç»ŸçŠ¶æ€</h2>
              <div style="margin-bottom: 20px;">
                <span class="status-dot" :class="apiStatus ? 'status-online' : 'status-offline'"></span>
                <strong>åç«¯APIæœåŠ¡:</strong> {{ apiStatus ? 'è¿è¡Œä¸­' : 'æœªè¿æ¥' }}
                <br>
                <small style="color: #666;">http://localhost:3000</small>
              </div>
              
              <div v-if="testResult" style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-top: 20px;">
                <h3 style="margin-bottom: 10px;">æµ‹è¯•ç»“æœ</h3>
                <pre style="white-space: pre-wrap; word-wrap: break-word; font-size: 14px; margin: 0;">{{ testResult }}</pre>
              </div>
            </div>
            
            <!-- åŠŸèƒ½æ¨¡å— -->
            <div class="card" style="margin-bottom: 30px;">
              <h2 style="text-align: center; margin-bottom: 40px;">æ ¸å¿ƒåŠŸèƒ½</h2>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                <div style="background: white; border-radius: 15px; padding: 30px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                  <div style="font-size: 48px; margin-bottom: 20px;">ğŸ’¬</div>
                  <h3 style="margin-bottom: 15px;">æƒ…æ„Ÿå€¾è¯‰</h3>
                  <p style="color: #666; line-height: 1.6;">åŒ¿ååˆ†äº«ä½ çš„å¿ƒæƒ…ï¼Œè·å¾—ç¤¾åŒºæ”¯æŒå’Œå…±é¸£</p>
                </div>
                <div style="background: white; border-radius: 15px; padding: 30px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                  <div style="font-size: 48px; margin-bottom: 20px;">ğŸŒ™</div>
                  <h3 style="margin-bottom: 15px;">æ™šé—´ç¤¾ç¾¤</h3>
                  <p style="color: #666; line-height: 1.6;">18:00-04:00ä¸“å±æ´»åŠ¨ï¼Œå¤œé—´ä¸å†å­¤å•</p>
                </div>
                <div style="background: white; border-radius: 15px; padding: 30px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                  <div style="font-size: 48px; margin-bottom: 20px;">ğŸ¯</div>
                  <h3 style="margin-bottom: 15px;">ç›®æ ‡å¼•å¯¼</h3>
                  <p style="color: #666; line-height: 1.6;">ä¼šå‘˜ä¸“å±ç›®æ ‡è§„åˆ’ï¼Œé€æ­¥æ‰¾åˆ°äººç”Ÿæ–¹å‘</p>
                </div>
              </div>
            </div>
            
            <!-- æµ‹è¯•è´¦æˆ· -->
            <div class="card">
              <h2 style="margin-bottom: 20px;">æµ‹è¯•è´¦æˆ·</h2>
              <div style="background: linear-gradient(135deg, #e0e7ff 0%, #ede9fe 100%); border-radius: 15px; padding: 30px;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; font-family: monospace; font-size: 16px;">
                  <div><strong>ç”¨æˆ·å:</strong> test_user</div>
                  <div><strong>å¯†ç :</strong> test123</div>
                  <div><strong>ä¼šå‘˜ç­‰çº§:</strong> å…è´¹ä¼šå‘˜</div>
                </div>
              </div>
            </div>
          </main>
          
          <!-- é¡µè„š -->
          <footer style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 40px 0; text-align: center; margin-top: 60px; border-radius: 15px 15px 0 0;">
            <div>
              <p>Â© 2026 MiniLoveé¡¹ç›® Â· ç‰ˆæœ¬ v0.1.0-beta</p>
              <p>ä¸ºä½ çš„æƒ…æ„Ÿä¹‹æ—…ç‚¹äº®å…‰èŠ’</p>
            </div>
          </footer>
          
          <!-- ç™»å½•æ¨¡æ€æ¡† -->
          <div v-if="showLogin" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
            <div style="background: white; border-radius: 15px; padding: 40px; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
              <h3 style="margin-bottom: 30px; text-align: center;">ç™»å½•</h3>
              <form @submit.prevent="handleLogin">
                <div style="margin-bottom: 20px;">
                  <label style="display: block; margin-bottom: 8px; font-weight: bold;">ç”¨æˆ·å</label>
                  <input v-model="loginForm.username" type="text" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 20px;">
                  <label style="display: block; margin-bottom: 8px; font-weight: bold;">å¯†ç </label>
                  <input v-model="loginForm.password" type="password" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                  <button type="submit" class="btn btn-primary" style="flex: 1;">ç™»å½•</button>
                  <button @click="showLogin = false" type="button" class="btn btn-outline" style="flex: 1;">å–æ¶ˆ</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      `
    }).mount('#app')
  </script>
</body>
</html>