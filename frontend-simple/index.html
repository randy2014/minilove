<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniLove - 情感支持社区</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; }
        .gradient-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-secondary { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .gradient-dark { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .emoji { font-size: 1.25rem; }
        .mobile-frame { border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- 导航栏 -->
    <nav class="gradient-primary text-white shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-heart text-2xl"></i>
                    <span class="text-xl font-bold">MiniLove</span>
                    <span class="text-xs bg-white/20 px-2 py-1 rounded">Beta</span>
                </div>
                <div class="flex items-center space-x-3">
                    <button id="login-btn" class="bg-white text-purple-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition">
                        <i class="fas fa-sign-in-alt mr-2"></i>登录
                    </button>
                    <button id="register-btn" class="border border-white px-4 py-2 rounded-lg hover:bg-white/10 transition">
                        注册
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容 -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <!-- 英雄区 -->
            <section class="mb-12">
                <div class="flex flex-col lg:flex-row items-center">
                    <div class="lg:w-1/2 mb-8 lg:mb-0 lg:pr-8">
                        <h1 class="text-4xl font-bold mb-4">情感支持社区</h1>
                        <p class="text-lg text-gray-600 mb-6">
                            专为18-45岁男性设计，在晚间时段(18:00~04:00)提供情感支持、目标引导和社交连接。
                        </p>
                        <div class="flex space-x-4">
                            <button id="explore-btn" class="gradient-secondary text-white px-6 py-3 rounded-lg font-medium hover:opacity-90 transition">
                                <i class="fas fa-compass mr-2"></i>探索社区
                            </button>
                            <button id="demo-btn" class="border border-purple-600 text-purple-600 px-6 py-3 rounded-lg font-medium hover:bg-purple-50 transition">
                                <i class="fas fa-play-circle mr-2"></i>功能演示
                            </button>
                        </div>
                    </div>
                    <div class="lg:w-1/2">
                        <div class="mobile-frame overflow-hidden max-w-sm mx-auto">
                            <div class="bg-white p-1">
                                <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6">
                                    <div class="flex items-center mb-4">
                                        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"></div>
                                        <div class="ml-3">
                                            <div class="font-medium">匿名用户</div>
                                            <div class="text-xs text-gray-500">刚刚发布</div>
                                        </div>
                                    </div>
                                    <p class="text-gray-700 mb-3">"最近工作压力好大，不知道该怎么放松..."</p>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span><i class="fas fa-heart text-red-400"></i> 24</span>
                                        <span><i class="fas fa-comment"></i> 8</span>
                                        <span><i class="fas fa-share"></i> 3</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 功能模块 -->
            <section class="mb-12">
                <h2 class="text-2xl font-bold mb-6 text-center">核心功能</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="card-hover bg-white p-6 rounded-xl shadow-md">
                        <div class="w-12 h-12 rounded-full gradient-primary flex items-center justify-center mb-4">
                            <i class="fas fa-comments text-white text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">情感倾诉</h3>
                        <p class="text-gray-600">匿名分享你的心情，获得社区支持和共鸣</p>
                    </div>
                    <div class="card-hover bg-white p-6 rounded-xl shadow-md">
                        <div class="w-12 h-12 rounded-full gradient-secondary flex items-center justify-center mb-4">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">晚间社群</h3>
                        <p class="text-gray-600">18:00-04:00专属活动，夜间不再孤单</p>
                    </div>
                    <div class="card-hover bg-white p-6 rounded-xl shadow-md">
                        <div class="w-12 h-12 rounded-full gradient-dark flex items-center justify-center mb-4">
                            <i class="fas fa-bullseye text-white text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">目标引导</h3>
                        <p class="text-gray-600">会员专属目标规划，逐步找到人生方向</p>
                    </div>
                </div>
            </section>

            <!-- API状态 -->
            <section class="mb-12">
                <h2 class="text-2xl font-bold mb-6">系统状态</h2>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div class="mb-4">
                        <h3 class="font-bold mb-2">后端API服务</h3>
                        <div class="flex items-center">
                            <span id="api-status" class="inline-block w-3 h-3 rounded-full bg-green-500 mr-2"></span>
                            <span class="text-sm">运行中: http://localhost:3000</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-lg font-bold" id="user-count">127</div>
                            <div class="text-sm text-gray-500">注册用户</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-lg font-bold" id="post-count">543</div>
                            <div class="text-sm text-gray-500">情感分享</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-lg font-bold" id="comment-count">2,184</div>
                            <div class="text-sm text-gray-500">暖心回复</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-lg font-bold" id="active-count">89</div>
                            <div class="text-sm text-gray-500">当前在线</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- API测试 -->
            <section>
                <h2 class="text-2xl font-bold mb-6">API测试</h2>
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6">
                    <div class="mb-4">
                        <h3 class="font-bold mb-2">测试账户</h3>
                        <div class="bg-white rounded-lg p-4 mb-3">
                            <div class="font-mono text-sm">
                                <span class="text-gray-500">用户名:</span> test_user<br>
                                <span class="text-gray-500">密码:</span> test123
                            </div>
                        </div>
                        <button id="test-login-btn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                            <i class="fas fa-plug mr-2"></i>测试登录API
                        </button>
                        <div id="login-result" class="mt-3 hidden">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                <pre class="text-sm" id="login-result-text"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="text-sm text-gray-600">
                        <i class="fas fa-info-circle mr-2"></i>
                        API文档: <a href="http://localhost:3000/api-docs" class="text-purple-600 underline">http://localhost:3000/api-docs</a>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="gradient-dark text-white py-8">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <div class="flex justify-center items-center mb-4">
                    <i class="fas fa-heart text-xl mr-2"></i>
                    <span class="text-xl font-bold">MiniLove</span>
                </div>
                <p class="text-white/80 mb-4">情感支持社区 · 为你点亮每个夜晚</p>
                <div class="text-sm text-white/60">
                    © 2026 MiniLove项目 · 版本 v0.1.0-beta
                </div>
            </div>
        </div>
    </footer>

    <script>
        // API状态检查
        async function checkApiStatus() {
            try {
                const response = await fetch('http://localhost:3000/health');
                const statusEl = document.getElementById('api-status');
                if (response.ok) {
                    statusEl.className = 'inline-block w-3 h-3 rounded-full bg-green-500 mr-2';
                } else {
                    statusEl.className = 'inline-block w-3 h-3 rounded-full bg-red-500 mr-2';
                }
            } catch (error) {
                document.getElementById('api-status').className = 'inline-block w-3 h-3 rounded-full bg-red-500 mr-2';
            }
        }

        // 测试登录
        async function testLogin() {
            const resultEl = document.getElementById('login-result');
            const textEl = document.getElementById('login-result-text');
            
            resultEl.classList.remove('hidden');
            textEl.textContent = '正在登录...';
            
            try {
                const response = await fetch('http://localhost:3000/api/v1/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: 'test_user',
                        password: 'test123'
                    })
                });
                
                const data = await response.json();
                textEl.textContent = JSON.stringify(data, null, 2);
                
                if (data.token) {
                    resultEl.className = 'mt-3';
                    resultEl.innerHTML = `
                        <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                            <div class="text-green-700 font-medium mb-2">✅ 登录成功！</div>
                            <pre class="text-sm text-gray-700">${JSON.stringify(data, null, 2)}</pre>
                            <div class="mt-2 text-sm text-gray-600">
                                Token已获取，可以访问用户信息等其他API
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                textEl.textContent = `错误: ${error.message}`;
                resultEl.className = 'mt-3';
                resultEl.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                        <div class="text-red-700 font-medium">❌ 登录失败</div>
                        <div class="text-sm text-red-600 mt-1">${error.message}</div>
                        <div class="text-xs text-gray-600 mt-2">
                            请确保后端服务正在运行: http://localhost:3000
                        </div>
                    </div>
                `;
            }
        }

        // 按钮事件
        document.getElementById('test-login-btn').addEventListener('click', testLogin);
        document.getElementById('explore-btn').addEventListener('click', () => {
            window.open('http://localhost:3000/api-docs', '_blank');
        });
        document.getElementById('demo-btn').addEventListener('click', () => {
            alert('功能演示：\n1. 后端API已运行\n2. 测试账户可用\n3. 数据库架构就绪\n4. 部署配置完成');
        });
        document.getElementById('login-btn').addEventListener('click', () => {
            window.location.href = '#';
        });
        document.getElementById('register-btn').addEventListener('click', () => {
            window.location.href = '#';
        });

        // 初始化
        checkApiStatus();
        
        // 模拟数据更新
        setInterval(() => {
            const activeEl = document.getElementById('active-count');
            let current = parseInt(activeEl.textContent);
            activeEl.textContent = Math.max(50, current + (Math.random() > 0.5 ? 1 : -1));
        }, 5000);
    </script>
</body>
</html>